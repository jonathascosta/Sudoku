<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Sudoku</title>
    <link href="./main.css" rel="stylesheet" />
</head>

<body>
    <div id="loader">
        <div id="loading-text">Loading...</div>
    </div>

    <script type="module">
        import { Board } from './Board.js';
        import { Loader } from './Loader.js';
        import { BoardBuilder } from './SudokuCreator.js';

        const loader = new Loader('loader', 3000);
        loader.start();

        const worker = new Worker('./sudoku-worker.js', { type: 'module' });

        worker.onmessage = function (event) {
            let sudokuPuzzle = event.data;

            let initialBoard = [
                [[], [], [], [], [], [], [], [], []],
                [[], [], [], [], [], [], [], [], []],
                [[], [], [], [], [], [], [], [], []],
                [[], [], [], [], [], [], [], [], []],
                [[], [], [], [], [], [], [], [], []],
                [[], [], [], [], [], [], [], [], []],
                [[], [], [], [], [], [], [], [], []],
                [[], [], [], [], [], [], [], [], []],
                [[], [], [], [], [], [], [], [], []]
            ];

            for (let i = 0; i < 9; i++) {
                for (let j = 0; j < 9; j++) {
                    if (sudokuPuzzle.Cells[i][j].Value !== 0) {
                        initialBoard[i][j] = sudokuPuzzle.Cells[i][j].Value;
                    }
                }
            }

            let board = new Board(initialBoard);
            window.board = board;
            window.puzzle = sudokuPuzzle;
            document.body.innerHTML = board.render();

            loader.stop();
        };

        worker.postMessage('start');

    </script>
</body>

</html>